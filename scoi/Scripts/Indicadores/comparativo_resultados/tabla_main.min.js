"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function redondeo(n){return Math.round(n*100)/100}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},$MI_URL=window.location.protocol+"//"+window.location.hostname,$URL_API="/api/",EstadoDeResultados=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={fecha:this.fecha_hoy(),periodo:0,Totales:{COSTO_DE_VENTAS:0,VENTAS_NETAS:0,GASTOS_DE_OPERACION:0,UTILIDAD_EN_OPERACIONES:0,TRUPUT_DE_OPERACION:0,UTILIDAD_NETA_OPERACIONES:0,TRUPUT_NETA_OPERACIONAL:0,IMPUESTOS_ISR:0,IMPUESTOS_PTU:0,GASTOS_FAMILIA_IZABAL:0,TRUPUT_NETA:0,lista_establecimientos:[]},lista:[],concepto:"",establecimiento:{Folio_Establecimiento:-1,Establecimiento:"",Lista:[],Clasificadores:[]},seleccion:0};this.barChart=null;this._fecha=this.on_fecha.bind(this);this._periodo=this.on_perido.bind(this);this._concepto=this.on_concepto.bind(this);this._Establecimiento_pantalla_0=this.on_Establecimiento_pantalla_0.bind(this);setTimeout(function(){return document.getElementById("pantalla_carga").style.display="none"},1e3)}return _inherits(t,n),_createClass(t,[{key:"on_fecha",value:function(n){var t=n.target.value.split("-");this.setState({fecha:n.target.value})}},{key:"on_perido",value:function(n){this.setState({periodo:n.target.value})}},{key:"on_concepto",value:function(n){console.log("concepto",n);document.getElementById("modal_concepto").style.display="flex";this.setState({concepto:n})}},{key:"on_Establecimiento_pantalla_0",value:function(n){console.log("Detalles=>",n);this.setState({seleccion:n});var t=document.getElementById("modal_movimientos_por_establecimiento");t.style.display="flex"}},{key:"on_eventoEstablecimiento",value:function(n){var i=this,t=[];console.log("Establecimiento Seleccion:",n);n.lista_conceptos.forEach(function(r){r.concepto==i.state.concepto&&r.Lista_clasificadores.forEach(function(i){i.Lista_subclasificadores.forEach(function(u){u.Lista_movimientos.forEach(function(f){t.push({Folio_establecimiento:n.folio_establecimiento,Establecimiento:n.establecimiento,Concepto:r.concepto,Clasificacion:i.clasificador,Subclasificacion:u.subclacificador,Movimiento:f.Tipo_movimiento,Semana_del_anio:f.Semana,Mes:f.Mes,Anio:f.Anio,Total_Costo:f.Costo,Total_Precio_venta:f.Precio_venta})})})})});this.Obtener_movimientos_Ordenados(t)}},{key:"fecha_hoy_dd_mm_yy",value:function(){var n=new Date,t=n.getDate()>10?n.getDate():"0"+n.getDate(),i=n.getMonth()+1>10?n.getMonth()+1:"0"+(n.getMonth()+1),r=n.getFullYear();return t+"/"+i+"/"+r}},{key:"fecha_hoy",value:function(){var n=new Date,t=n.getDate()>10?n.getDate():"0"+n.getDate(),i=n.getMonth()+1>10?n.getMonth()+1:"0"+(n.getMonth()+1),r=n.getFullYear();return r+"-"+i+"-"+t}},{key:"parseo_fecha",value:function(){var n=this.state.fecha.split("-");return n[2]+"-"+n[1]+"-"+n[0]}},{key:"grafica_barras",value:function(n){var u=["#00b300","#66ccff","#ff9933","#ff0000","#ff00a3","#0077b3","#996633","#999966","#33cccc"],t=[],i=[],r;n.forEach(function(n){i.push(n.establecimiento)});["VENTAS NETAS","COSTO DE VENTAS","UTILIDAD EN OPERACION","GASTOS DE OPERACION","UTILIDAD NETA OPERACIONAL","IMPUESTOS ISR","IMPUESTOS PTU 10%","UTILIDAD NETA","RETIROS UTILIDAD"].forEach(function(i,r){i!="RETIROS UTILIDAD"&&function(){var f={label:i,data:[],backgroundColor:u[r],borderColor:"black",borderWidth:1,fill:!1};n.forEach(function(n){switch(i){case"VENTAS NETAS":f.data.push(redondeo(n.VENTAS_NETAS.Total_Costo));break;case"COSTO DE VENTAS":f.data.push(redondeo(n.COSTO_DE_VENTAS.Total_Costo*-1));break;case"UTILIDAD EN OPERACION":f.data.push(redondeo(n.UTILIDAD_EN_OPERACIONES.Total_Costo));break;case"GASTOS DE OPERACION":f.data.push(redondeo(n.GASTOS_DE_OPERACION.Total_Costo*-1));break;case"UTILIDAD NETA OPERACIONAL":f.data.push(redondeo(n.UTILIDAD_NETA_OPERACIONES.Total_Costo));break;case"IMPUESTOS ISR":f.data.push(redondeo(n.IMPUESTOS_ISR.Total_Costo));break;case"IMPUESTOS PTU 10%":f.data.push(redondeo(n.IMPUESTOS_PTU.Total_Costo*-1));break;case"UTILIDAD NETA":f.data.push(redondeo(n.Total_Costo))}});t.push(f)}()});r=document.getElementById("dashboard_graficos");this.barChart!=null&&(this.barChart.clear(),this.barChart.destroy());this.barChart=new Chart(r,{type:"bar",data:{labels:i,datasets:t},options:{scales:{yAxes:[{ticks:{beginAtZero:!1,callback:function(n){return moneyFormat(n)}},scaleLabel:{display:!0,labelString:"CONCEPTOS ($)."}}]},title:{display:!0,text:"Grafica Estado De Resultados De Operaciones.",fontSize:18},tooltips:{labelColor:function(){return{borderColor:"rgb(0, 153, 204)",backgroundColor:"rgb(66d9ff)"}},labelTextColor:function(){return"#543453"}}}});this.barChart.update()}},{key:"Obtener_estado_de_resultados",value:function(){var n=this;document.getElementById("pantalla_carga")&&(document.getElementById("pantalla_carga").style.display="flex",this.setState({lista:[]}));fetch($URL_API+"Estado_de_resultados?fecha="+this.parseo_fecha()+"&meses="+this.state.periodo,{method:"get",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json().then(function(t){n.setState({lista:t.lista_establecimientos,Totales:t});document.getElementById("pantalla_carga").style.display="none";t.lista_establecimientos.length>0?n.grafica_barras(t.lista_establecimientos):confirm("Sin Datos A Mostrar...\n Reintentar?")&&n.Obtener_estado_de_resultados()})["catch"](function(n){return console.error(n)})})["catch"](function(){return alert("error en Conexion api!!!")})}},{key:"Obtener_movimientos_Ordenados",value:function(n){var t=this;document.getElementById("pantalla_carga")&&(document.getElementById("pantalla_carga").style.display="flex");fetch($URL_API+"Estado_de_resultados",{method:"post",credentials:"same-origin",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(n){return n.json().then(function(n){console.log(n);n?(t.setState({establecimiento:n}),document.getElementById("modal_movimientos").style.display="flex",document.getElementById("pantalla_carga").style.display="none"):alert("No Hay Respuesta!!!")})["catch"](function(n){return console.error(n)})})["catch"](function(){return alert("error en Conexion api!!!")})}},{key:"render",value:function(){var n=this.state,i=n.periodo,r=n.fecha,u=n.concepto,t=n.Totales,f=n.seleccion;return React.createElement("div",{className:"panel panel-default"},React.createElement(Cavecera,{periodo:i,fecha:r,evFecha:this._fecha,evPeriodo:this._periodo,evReload:this.Obtener_estado_de_resultados.bind(this)}),React.createElement(VistaTablaPrincipal,{lista:t.lista_establecimientos,evento:this._concepto,eventoEstablecimiento:this._Establecimiento_pantalla_0,Totales:t}),React.createElement(ModalConceptos,{concepto:u,lista:t.lista_establecimientos,eventoEstablecimiento:this._Establecimiento_pantalla_0}),React.createElement(ModalMivimientosPorEstablecimiento,{establecimiento:f}),React.createElement(Cargar,{nombre:"pantalla_carga"}))}}]),t}(React.Component),Cargar=function(n){var t=n.nombre;return React.createElement("div",{id:t,style:{display:"flex",position:"fixed",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(242, 242, 242, 0.79)",top:0,bottom:0,left:0,right:0,zIndex:9999,fontSize:"40px"}},React.createElement("label",{id:t+1},React.createElement("i",{className:"fa fa-circle-o-notch rotate"}),React.createElement("strong",{style:{fontSize:"20px"}}," Cargando..."),React.createElement("br",null)))},moneyFormat=function(n){var i=function(n){return n>9||n.search(0)>-1?n:n+"0"},r=function(n){return new Intl.NumberFormat("es-MX").format(n)},t=n.toString(),u=t.split(".").length>1?i(t.split(".")[1]):"00",f=t.split(".").length>0?r(t.split(".")[0]):"0";return"$"+f+"."+u},Cavecera=function(n){var t=n.periodo,i=n.fecha,r=n.evPeriodo,u=n.evFecha,f=n.evReload,e=function(){return React.createElement("div",null,React.createElement("span",{style:{display:"inline-block",width:"150px"}},React.createElement("strong",null," Periodo"),React.createElement("select",{defaultValue:t,className:"form-control",onChange:r},React.createElement("option",{value:"0"},"ACTUAL"),React.createElement("optgroup",{label:"PREVIOS"},React.createElement("option",{value:1},"1 Mes"),React.createElement("option",{value:2},"2 Meses"),React.createElement("option",{value:3},"3 Meses")))),React.createElement("span",{style:{display:"inline-block",width:"150px",marginLeft:"15px",marginRight:"35px"}},React.createElement("strong",null,"Fecha"),React.createElement("input",{type:"date",className:"btn btn-default",onChange:u,value:i})),React.createElement("i",{className:"btn btn-success",style:{marginLeft:"15px"},onClick:f},React.createElement("strong",null,"Cargar Informacion."),React.createElement("i",{className:"fa fa-download",style:{marginLeft:"5px"}})))};return React.createElement("div",{className:"panel-heading"},React.createElement("h3",null,"Estado De Resultados De Operaciones."),React.createElement(e,null))},VistaTablaPrincipal=function(n){var i=n.lista,f=n.evento,t=n.Totales,e=n.eventoEstablecimiento,r=["VENTAS NETAS","COSTO DE VENTAS","UTILIDAD EN OPERACION","TRUPUT DE OPERACION","GASTOS DE OPERACION","UTILIDAD NETA OPERACIONAL","TRUPUT NETA OPERACIONAL","IMPUESTOS ISR","IMPUESTOS PTU 10%","UTILIDAD NETA","TRUPUT NETA","RETIROS UTILIDAD","UTILIDAD NETA DESPUES DE RETIRO"],u=[],o=function(){var n=[];return i.forEach(function(t){t.establecimiento!="GASTOS ESPECIALES"&&(n.push(React.createElement("th",{key:t.folio_establecimiento,style:{background:"#0066ff",position:"sticky",top:"0"}},React.createElement("i",{style:{background:"#0066ff",border:"none"},onClick:function(){return e(t)},className:"btn btn-info "},t.establecimiento))),u.push(t.establecimiento))}),n},s=function(){var n=[];return r.forEach(function(t,i){t.search("UTILIDAD NETA")>-1?n.push(React.createElement("tr",{key:i,style:{width:"300px",background:"#f37021"}},React.createElement("th",null,React.createElement("strong",{style:{color:"azure"}},t)))):t.search("UTILIDAD")>-1&&t.search("RETIROS")==-1?n.push(React.createElement("tr",{key:i},React.createElement("th",{style:{background:"#cceeff"}},React.createElement("i",{className:"glyphicon glyphicon-triangle-right"}),React.createElement("strong",null,t)))):t.search("IMPUESTOS")>-1?n.push(React.createElement("tr",{key:t},React.createElement("th",{style:{background:"#ccff99"}},React.createElement("i",{className:"glyphicon glyphicon-triangle-right"}),React.createElement("strong",null,t)))):t.search("TRUPUT")>-1?n.push(React.createElement("tr",{key:t},React.createElement("th",{style:{backgroundColor:"#ffcc99"}},React.createElement("i",{className:"glyphicon glyphicon-triangle-right"}),React.createElement("strong",null,t)))):n.push(React.createElement("tr",{key:t},React.createElement("th",{onClick:function(){return f(t)}},React.createElement("i",{className:"glyphicon glyphicon-triangle-right"}),React.createElement("strong",null,t),React.createElement("i",{className:"glyphicon glyphicon-info-sign",style:{float:"right",fontSize:"18px",color:"#8c8c8c"}}))))}),n},h=function(n){var f=n.list,e=n.lista_est,r=[],u=0,o=0;return f.forEach(function(n){var f=[],s=function(t){r.push(React.createElement("tr",{key:n},f,React.createElement("th",{style:{textAlign:"right"}},moneyFormat(redondeo(t)))))},c=function(t){r.push(React.createElement("tr",{key:n},f,React.createElement("th",{style:{textAlign:"right",background:"#cceeff"}},moneyFormat(redondeo(t)))))},h=function(t){r.push(React.createElement("tr",{key:n},f,React.createElement("th",{style:{textAlign:"right",backgroundColor:"#ffcc99"}},redondeo(t)," ",React.createElement("i",{className:"fa fa-percent"}))))},l=function(t){r.push(React.createElement("tr",{key:n},f,React.createElement("th",{style:{textAlign:"right",background:"#ccff99"}},moneyFormat(redondeo(t)))))},a=function(t){r.push(React.createElement("tr",{key:n},f,React.createElement("th",{style:{background:u>0?"#009933":"#ff0000",color:"azure",textAlign:"right"}},moneyFormat(redondeo(t)))))},v=function(t){r.push(React.createElement("tr",{key:n},f,React.createElement("th",{style:{background:t>0?"green":"red",color:"azure",textAlign:"right"}},moneyFormat(redondeo(t)))))};i.forEach(function(t){var i=e.indexOf(t.establecimiento),r=function(r){var u=redondeo(r.Total_Costo);t.establecimiento!="GASTOS ESPECIALES"&&(f[i]=React.createElement("td",{key:n+"_"+t.establecimiento,style:{textAlign:"right"}},moneyFormat(u)))},s=function(r){var u=redondeo(r.Total_Costo);f[i]=React.createElement("td",{key:n+"_"+t.establecimiento,style:{textAlign:"right",background:"#cceeff"}},moneyFormat(u))},o=function(r){var u=redondeo(r.Total_Costo);f[i]=React.createElement("td",{key:n+"_"+t.establecimiento,style:{textAlign:"right",background:"#ffcc99"}},u," ",React.createElement("i",{className:"fa fa-percent"}))},h=function(r){var u=redondeo(r.Total_Costo);f[i]=React.createElement("td",{key:n+"_"+t.establecimiento,style:{textAlign:"right",background:"#ccff99"}},moneyFormat(u))},c=function(r){u+=r;f[i]=r>0?React.createElement("th",{key:n+"_"+t.establecimiento,style:{background:"#009933",color:"azure",textAlign:"right"}},moneyFormat(r)):React.createElement("th",{key:n+"_"+t.establecimiento,style:{background:"#ff0000",color:"azure",textAlign:"right"}},moneyFormat(r))},l=function(r){f[i]=React.createElement("th",{key:n+"_"+t.establecimiento,style:{background:"gray",color:"azure",textAlign:"center"}},r)};switch(n){case"VENTAS NETAS":r(t.VENTAS_NETAS);break;case"COSTO DE VENTAS":r(t.COSTO_DE_VENTAS);break;case"TRUPUT DE OPERACION":o(t.TRUPUT_DE_OPERACION);break;case"UTILIDAD EN OPERACION":s(t.UTILIDAD_EN_OPERACIONES);break;case"GASTOS DE OPERACION":r(t.GASTOS_DE_OPERACION);break;case"UTILIDAD NETA OPERACIONAL":s(t.UTILIDAD_NETA_OPERACIONES);break;case"TRUPUT NETA OPERACIONAL":o(t.TRUPUT_NETA_OPERACIONAL);break;case"IMPUESTOS ISR":h(t.IMPUESTOS_ISR);break;case"IMPUESTOS PTU 10%":h(t.IMPUESTOS_PTU);break;case"TRUPUT NETA":o(t.TRUPUT_NETA);break;case"RETIROS UTILIDAD":r(t.GASTOS_FAMILIA_IZABAL);break;case"UTILIDAD NETA":c(t.Total_Costo);break;case"UTILIDAD NETA DESPUES DE RETIRO":l(" -- ")}});switch(n){case"VENTAS NETAS":s(t.VENTAS_NETAS.Total_Costo);break;case"COSTO DE VENTAS":s(t.COSTO_DE_VENTAS.Total_Costo);break;case"TRUPUT DE OPERACION":h(t.TRUPUT_DE_OPERACION.Total_Costo);break;case"UTILIDAD EN OPERACION":c(t.UTILIDAD_EN_OPERACIONES.Total_Costo);break;case"GASTOS DE OPERACION":s(t.GASTOS_DE_OPERACION.Total_Costo);break;case"UTILIDAD NETA OPERACIONAL":c(t.UTILIDAD_NETA_OPERACIONES.Total_Costo);break;case"TRUPUT NETA OPERACIONAL":h(t.TRUPUT_NETA_OPERACIONAL.Total_Costo);break;case"IMPUESTOS ISR":l(t.IMPUESTOS_ISR.Total_Costo);break;case"IMPUESTOS PTU 10%":l(t.IMPUESTOS_PTU.Total_Costo);break;case"TRUPUT NETA":h(t.TRUPUT_NETA.Total_Costo);break;case"RETIROS UTILIDAD":o=t.GASTOS_FAMILIA_IZABAL.Total_Costo;s(t.GASTOS_FAMILIA_IZABAL.Total_Costo);break;case"UTILIDAD NETA":a(t.Total_Costo);break;case"UTILIDAD NETA DESPUES DE RETIRO":v(u)}}),r};return React.createElement("div",{className:"panel-body"},React.createElement("div",{style:{height:"540px",overflowX:"scroll"}},React.createElement("span",{style:{height:"90%",position:"sticky",left:"0",zIndex:"999",background:"azure",width:"20%",minWidth:"260px",display:"inline-block"}},React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",{className:"info"},React.createElement("th",{style:{width:"260px",background:"#005ce6",zIndex:"999",position:"sticky",top:"0"}},React.createElement("i",{style:{width:"260px",background:"#005ce6",border:"none"},className:"btn btn-info"},React.createElement("i",{className:"glyphicon glyphicon-usd"})," CONCEPTOS")))),React.createElement("tbody",null,React.createElement(s,null)))),React.createElement("span",{style:{height:"90%",width:"80%",display:"inline-block",zIndex:"990"}},React.createElement("table",{className:"table table-bordered"},React.createElement("thead",{style:{zIndex:"990"}},React.createElement("tr",{className:""},React.createElement(o,null),React.createElement("th",{style:{background:"#1aa3ff",zIndex:"990",position:"sticky",top:"0"}},React.createElement("i",{style:{background:"#1aa3ff",border:"none"},className:"btn btn-info"},"TOTAL")))),React.createElement("tbody",null,React.createElement(h,{list:r,lista_est:u}))))),React.createElement("canvas",{id:"dashboard_graficos",style:{height:"320px"}}))},ModalConceptos=function(n){var r=n.concepto,t=n.lista,o=n.eventoEstablecimiento,i=function(n){t.forEach(function(t){var u=r=="RETIROS UTILIDAD"?"GASTOS FAMILIA IZABAL":r,i=t.lista_conceptos.filter(function(n){return n.concepto==u});i.forEach(function(r){r.Lista_clasificadores.forEach(function(r){n(r,t,i)})})})},u=function(n){var t=[],r=[];return i(function(i){return!(i.clasificador==n)||(t=t.concat(i.Lista_subclasificadores))}),t.forEach(function(n){return!(r.findIndex(function(t){return t==n.subclacificador})===-1)||r.push(n.subclacificador)}),r},f=function(n,t){var f=[],e=[],o=[],r,v,y,u,k,c;i(function(i){i.clasificador==n&&(o=o.concat(i.Lista_subclasificadores.filter(function(n){return n.subclacificador==t})))});var s=!0,l=!1,a=undefined;try{for(r=o[Symbol.iterator]();!(s=(v=r.next()).done);s=!0)y=v.value,f=f.concat(y.Lista_movimientos)}catch(p){l=!0;a=p}finally{try{!s&&r["return"]&&r["return"]()}finally{if(l)throw a;}}var h=!0,w=!1,b=undefined;try{for(u=f[Symbol.iterator]();!(h=(k=u.next()).done);h=!0)c=k.value,e.findIndex(function(n){return n.Tipo_movimiento===c.Tipo_movimiento})>-1||e.push(c)}catch(p){w=!0;b=p}finally{try{!h&&u["return"]&&u["return"]()}finally{if(w)throw b;}}return e},e=function(){var n=[];return i(function(t){n.includes(t.clasificador)||n.push(t.clasificador)}),n},s=function(n){var i=n.lista_1,t=[];return i.forEach(function(n){var i="tb_"+remplazar_espacios_por_guion_bajo(n);t.push(React.createElement("tr",{className:"info",key:n},React.createElement("th",{style:{background:"#99c3ff"}},React.createElement("i",{style:{marginLeft:"10px",marginRight:"10px"}},React.createElement(BotonTogle,{identificador:i,poicion:0})),n)));t.push(React.createElement(h,{clasificador:n,nombre:i}))}),t.push(React.createElement("tr",null,React.createElement("th",{style:{background:"#f37021",color:"azure"}},"TOTALES :"))),t},h=function(n){var t=n.clasificador,i=n.nombre,r=u(t);return r.map(function(n){var r=crear_identificador(i,n);return[React.createElement("tr",{style:{background:"#e6f0ff",display:"none"},key:t+"_"+n,className:i},React.createElement("th",null,React.createElement("i",{style:{marginLeft:"30px",marginRight:"10px"}},React.createElement(BotonTogle,{identificador:r})),n)),React.createElement(c,{movimientos:f(t,n),nombre:r})]})},c=function(n){var t=n.movimientos,i=n.nombre;return t.map(function(n){return React.createElement("tr",{style:{background:"#e6ffff",display:"none"},key:"_"+n.Tipo_movimiento,className:i},React.createElement("th",null,React.createElement("span",{style:{marginLeft:"50px",marginRight:"10px"}},n.Tipo_movimiento)))})},l=function(n){var u=n.clasificador,e=n.subclasificador,s=n.nombre,o=[],r=[],h=f(u,e).map(function(n){return n.Tipo_movimiento});return h.forEach(function(n){var h=0,f;r=[];i(function(i,f){var o,l;if(u==i.clasificador){var s=t.findIndex(function(n){return n.establecimiento==f.establecimiento}),c=i.Lista_subclasificadores.findIndex(function(n){return n.subclacificador==e}),a=c>-1?i.Lista_subclasificadores[c]:{};c>-1&&(o=0,l=a.Lista_movimientos.filter(function(t){return t.Tipo_movimiento==n})||[],r[s]=l.length>0?l.map(function(n){return o+=n.Costo,n.Costo}):[],r[s]=r[s].length>0?o:0,h+=o||0)}});for(f in t)r[f]=React.createElement("td",{style:{textAlign:"right"},key:r[f]+"kjkdfgb"},moneyFormat(redondeo(r[f])||0));r.push(React.createElement("td",{style:{textAlign:"right"}},moneyFormat(redondeo(h||0))));o.push(React.createElement("tr",{className:s,style:{display:"none",background:"#e6ffff"}},r))}),o},a=function(n){var r=n.clasificador,e=n.nombre,f=[];return u(r).forEach(function(n){var h=crear_identificador(e,n),u=[],s=0,o;i(function(i,f){r==i.clasificador&&function(){var r=t.findIndex(function(n){return n.establecimiento==f.establecimiento});u[r]=i.Lista_subclasificadores.findIndex(function(t){return t.subclacificador==n})>-1?i.Lista_subclasificadores.find(function(t){return t.subclacificador==n}).Total_Costo:0;s+=redondeo(u[r])}()});for(o in t)u[o]=React.createElement("td",{style:{textAlign:"right"},key:u[o]+"kjkdfgb"},moneyFormat(redondeo(u[o])||0));u.push(React.createElement("td",{style:{textAlign:"right"},key:redondeo(s)+"kjbfbbk"},moneyFormat(redondeo(s))));f.push(React.createElement("tr",{key:r+"_123fsdffgddfgdss",style:{display:"none",background:"#e6f0ff"},className:e},u));f.push(React.createElement(l,{clasificador:r,subclasificador:n,nombre:h}))}),f},v=function(n){var u=n.clasificadores,r=[];return u.forEach(function(n){var u=[],o="tb_"+remplazar_espacios_por_guion_bajo(n),e=0,f;i(function(i,r){if(n==i.clasificador){var f=t.findIndex(function(n){return n.establecimiento==r.establecimiento});u[f]=redondeo(i.Total_Costo);e+=redondeo(i.Total_Costo)}});for(f in t)u[f]=React.createElement("th",{style:{textAlign:"right",background:"#b3d2ff"},key:u[f]+"-"+f}," ",moneyFormat(redondeo(u[f])||0));u.push(React.createElement("th",{style:{textAlign:"right",background:"#b3d2ff"}}," ",moneyFormat(redondeo(e))));r.push(React.createElement("tr",{key:n+"_12sg3",className:"info"},u));r.push(React.createElement(a,{clasificador:n,nombre:o}))}),r},y=function(){var n=[];return t.forEach(function(t){n.push(React.createElement("th",{key:t.folio_establecimiento,style:{background:"#3388ff",position:"sticky",top:"0"}},React.createElement("i",{style:{background:"#3388ff",border:"none"},className:"btn btn-info ",onClick:function(){return o(t)}},t.establecimiento,React.createElement("span",{className:"glyphicon glyphicon-info-sign",style:{marginLeft:"10px"}}))))}),n},p=function(){var n=[],i=0;return t.forEach(function(t){var u="NA";switch(r){case"VENTAS NETAS":u=t.VENTAS_NETAS.Total_Costo;break;case"COSTO DE VENTAS":u=t.COSTO_DE_VENTAS.Total_Costo;break;case"GASTOS DE OPERACION":u=t.GASTOS_DE_OPERACION.Total_Costo;break;case"RETIROS UTILIDAD":u=t.GASTOS_FAMILIA_IZABAL.Total_Costo}i+=u!="NA"?u:0;n.push(React.createElement("th",{style:{background:"#f37021",color:"azure",textAlign:"right"}},moneyFormat(redondeo(u))))}),n.push(React.createElement("th",{style:{background:"#f37021",color:"azure",textAlign:"right"}},moneyFormat(redondeo(i)))),React.createElement("tr",{className:"success"},n)};return React.createElement("div",{id:"modal_concepto",className:"",style:{display:"none",position:"fixed",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(144, 144, 146, 0.29)",top:0,bottom:0,left:0,right:0,zIndex:999}},React.createElement("div",{className:"panel panel-default animate",style:{height:"95%",width:"90%"}},React.createElement("div",{className:"panel-heading",style:{background:"#006aff",color:"#FFFFFF"}},React.createElement("i",{className:"btn btn-danger fa fa-close",style:{float:"right"},onClick:function(){return document.getElementById("modal_concepto").style.display="none"}}),React.createElement("h4",null,React.createElement("i",{className:"fa fa-bar-chart",style:{marginLeft:"10px",marginRight:"10px"}}),r,".")),React.createElement("div",{className:"panel-body",style:{height:"95%"}},React.createElement("div",{style:{height:"96%",overflow:"auto"}},React.createElement("span",{style:{height:"100%",position:"sticky",left:"0",zIndex:"999",width:"30%",display:"inline-block"}},React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",{className:"info"},React.createElement("th",{style:{background:"#006aff",zIndex:"999",position:"sticky",top:"0"}},React.createElement("i",{style:{background:"#006aff",border:"none"},className:"btn btn-info"},React.createElement("i",{className:"fa fa-dollar",style:{marginLegt:"5px",marginRight:"5px"}}),r)))),React.createElement("tbody",null,React.createElement(s,{lista_1:e()})))),React.createElement("span",{style:{height:"100%",width:"70%",display:"inline-block",zIndex:"990"}},React.createElement("table",{className:"table table-bordered"},React.createElement("thead",null,React.createElement("tr",{style:{background:"#06d1e0",zIndex:"999"},className:"info"},React.createElement(y,null),React.createElement("th",{style:{background:"#006aff",zIndex:"999",position:"sticky",top:"0"}},React.createElement("i",{style:{background:"#006aff",border:"none"},className:"btn btn-info"},"TOTAL")))),React.createElement("tbody",null,React.createElement(v,{clasificadores:e()}),React.createElement(p,null))))))))},ModalMivimientosPorEstablecimiento=function(n){var t=n.establecimiento,f=["VENTAS NETAS","COSTO DE VENTAS","UTILIDAD EN OPERACION","GASTOS DE OPERACION"],r=function(n,t){var u=0,r=!0,f=!1,e=undefined,i,o,s;try{for(i=n[Symbol.iterator]();!(r=(o=i.next()).done);r=!0)s=o.value,u+=s[t]===0?1:0}catch(h){f=!0;e=h}finally{try{!r&&i["return"]&&i["return"]()}finally{if(f)throw e;}}return!(u===n.length)},e=function(n){var r=function(n){return n?n.Total_Costo:0},i=0,u=t.VENTAS_NETAS,f=t.COSTO_DE_VENTAS,e=t.GASTOS_DE_OPERACION,o=t.UTILIDAD_EN_OPERACIONES,s=t.TRUPUT_DE_OPERACION,h=t.TRUPUT_NETA_OPERACIONAL;switch(n){case"VENTAS NETAS":i=r(u);break;case"COSTO DE VENTAS":i=r(f);break;case"GASTOS DE OPERACION":i=r(e);break;case"UTILIDAD EN OPERACION":i=r(o);break;case"TRUPUT DE OPERACION":i=r(s);break;case"TRUPUT NETA OPERACIONAL":i=r(h);break;case"IMPUESTOS ISR":i=r(IMPUESTOS_ISR);break;case"IMPUESTOS PTU 10%":i=r(IMPUESTOS_PTU)}return i!=0},u=function(n){var t=n.dato,i=n.estilo,r=n.icono,u=n.margen,f=n.columnas,e=n.mas,s=n.pos,o;return t=t?t:"NA",i=i?i:{color:"#000000"},r=r?r:"",u=u?{marginLeft:u}:{marginRight:"0"},f=f?f:"",o=e?React.createElement(BotonTogle,{identificador:e,poicion:s}):React.createElement("i",{className:r,style:u}),React.createElement("th",{colSpan:f,style:i},o,React.createElement("span",{style:{marginLeft:"5px"},title:t},t))},i=function(n){var i=n.dato,t=n.estilo;return t=t?t:{color:"#000000"},React.createElement("th",{style:t},moneyFormat(redondeo(i||0)))},o=function(){var n=function(){return React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{rowSpan:"3",style:{fontSize:"20px",textAlign:"center",backgroundColor:"#0077b3",color:"azure"}},t.establecimiento||""),React.createElement("th",{style:{backgroundColor:"#0077b3",color:"azure",top:"0"}},"AÑO")),React.createElement("tr",null,React.createElement("th",{style:{backgroundColor:"#0077b3",color:"azure",top:"30px"}},"MES")),React.createElement("tr",null,React.createElement("th",{style:{backgroundColor:"#0077b3",color:"azure",top:"60px"}},"SEMANA")))},i=function(){var n=function(){var u=[],t=!0,o=!1,s=undefined,n,h,r;try{for(n=f[Symbol.iterator]();!(t=(h=n.next()).done);t=!0)r=h.value,e(r)?u.push(React.createElement(i,{concepto:r})):""}catch(c){o=!0;s=c}finally{try{!t&&n["return"]&&n["return"]()}finally{if(o)throw s;}}return u},i=function(n){var r=n.concepto,i=[],f=t.lista_conceptos,e=f?f.filter(function(n){return n.concepto==r}):[];return e.length>0?e.forEach(function(n){var t="tb_"+remplazar_espacios_por_guion_bajo(n.concepto);i.push(React.createElement("tr",null,React.createElement(u,{dato:n.concepto,estilo:{forntSize:"18px",color:"azure",background:"#0e58b7"},icono:"fa fa-chevron-right",margen:"5px",columnas:"2",mas:t})),React.createElement(o,{ListaClasificadores:n.Lista_clasificadores,nombre:t}))}):i.push(React.createElement("tr",null,React.createElement(u,{dato:r,estilo:{forntSize:"18px",color:"azure",background:"#737373"},icono:"fa fa-chevron-circle-right",margen:"5px",columnas:"2"}))),i},o=function(n){var f=n.ListaClasificadores,i=n.nombre,t=[];return f.forEach(function(n){if(r(n.Lista_SemanaAnios,"Total_Costo")){var f=crear_identificador(i,n.clasificador);t.push(React.createElement("tr",{className:i,style:{display:"none"}},React.createElement(u,{dato:n.clasificador,estilo:{forntSize:"18px",color:"azure",background:"#729fcf"},icono:"fa fa-angle-right",margen:"15px",columnas:"2",mas:f,pos:1})));t.push(React.createElement(s,{subClasificadores:n.Lista_subclasificadores,nombre:f}))}}),t},s=function(n){var f=n.subClasificadores,i=n.nombre,t=[];return f.forEach(function(n){if(r(n.Lista_SemanaAnios,"Total_Costo")){var f=crear_identificador(i,n.subclacificador);t.push(React.createElement("tr",{className:i,style:{display:"none"}},React.createElement(u,{dato:n.subclacificador,estilo:{forntSize:"18px",background:"#b4c7dc"},icono:"fa fa-angle-double-right",margen:"25px",columnas:"2",mas:f,pos:2})));t.push(React.createElement(h,{movimientos:n.Lista_movimientos,nombre:f}))}}),t},h=function(n){var f=n.movimientos,e=n.nombre,i=[],t=[];return f.forEach(function(n){var i=t.findIndex(function(t){return t.Tipo_movimiento==n.Tipo_movimiento});i==-1&&t.push(n)}),r(t,"Costo")&&t.forEach(function(n){i.push(React.createElement("tr",{className:e,style:{display:"none"}},React.createElement(u,{dato:n.Tipo_movimiento,estilo:{forntSize:"18px",background:"#FFFFF0"},icono:"fa fa-caret-right",margen:"35px",columnas:"2"})))}),i};return React.createElement("tbody",null,React.createElement(n,null),React.createElement("tr",null,React.createElement("th",{colSpan:"2",style:{background:"#ff6600",color:"azure",textAlign:"left"}},React.createElement("strong",null,"UTILIDAD NETA OPERACIONAL POR SEMANA"))))};return React.createElement("table",{className:"table table-condensed"},React.createElement(n,null),React.createElement(i,null))},s=function(){var u=typeof t=="object"?t.Lista_SemanaAnios:[],n=typeof t=="object"?t.Ordern.Semanas:[],o=function(){var n=typeof t=="object"?t.Ordern.Lista:[],i=function(n){var r=0,i=!0,u=!1,f=undefined,t,e,o;try{for(t=n[Symbol.iterator]();!(i=(e=t.next()).done);i=!0)o=e.value,r+=o.Semanas.length}catch(s){u=!0;f=s}finally{try{!i&&t["return"]&&t["return"]()}finally{if(u)throw f;}}return r},r=function(){return React.createElement("tr",null," ",n.map(function(n){return React.createElement("th",{colSpan:i(n.Meses),style:{textAlign:"center",backgroundColor:"#0077b3",color:"azure",top:"0"}},n.Anio)}),React.createElement("th",{rowSpan:"3",style:{fontSize:"20px",width:"140px",textAlign:"center",backgroundColor:"#0077b3",color:"azure",top:"0"}},"TOTAL"))},u=function(){return React.createElement("tr",null,n.map(function(n){return n.Meses.map(function(n){return React.createElement("th",{colSpan:i([n]),style:{textAlign:"center",backgroundColor:"#0077b3",color:"azure",top:"30px"}},n.Mes)})}))},f=function(){return React.createElement("tr",null,n.map(function(n){return n.Meses.map(function(n){return n.Semanas.map(function(n){return React.createElement("th",{style:{textAlign:"center",backgroundColor:"#0077b3",color:"azure",top:"60px"}},n.Semana)})})}))};return React.createElement("thead",{className:"info"},React.createElement(r,null),React.createElement(u,null),React.createElement(f,null))},s=function(){var o=function(){var n=[];return f.forEach(function(t){return e(t)?n.push(React.createElement(s,{concepto:t})):""}),n},s=function(r){var s=r.concepto,f=t.lista_conceptos,e=t.Lista_SemanaAnios,c=t.UTILIDAD_EN_OPERACIONES,u=[],o=f?f.filter(function(n){return n.concepto==s}):[];return t?o.length>0?o.forEach(function(t){var f=t.concepto,r=t.Lista_SemanaAnios,e=t.Lista_clasificadores,o=t.Total_Costo,s="tb_"+remplazar_espacios_por_guion_bajo(f);u.push(React.createElement("tr",null,n.map(function(n){var t=r.findIndex(function(t){return t.Semana==n}),u=t>-1?r[t].Total_Costo:0;return React.createElement(i,{dato:u,estilo:{forntSize:"14px",color:"azure",background:"#0e58b7",textAlign:"right"}})}),React.createElement(i,{dato:o,estilo:{forntSize:"14px",color:"azure",background:"#0e58b7",textAlign:"right"}})));u.push(React.createElement(h,{ListaClasificadores:e,nombre:s}))}):u.push(React.createElement("tr",null,n.map(function(n){var t=e.findIndex(function(t){return t.Semana==n}),r=t>-1?e[t].UTILIDAD_EN_OPERACION.Total_Costo:0;return React.createElement(i,{dato:r,estilo:{forntSize:"14px",color:"azure",background:"#737373",textAlign:"right"}})}),React.createElement(i,{dato:c.Total_Costo,estilo:{forntSize:"14px",color:"azure",background:"#737373",textAlign:"right"}}))):"",u},h=function(t){var e=t.ListaClasificadores,f=t.nombre,u=[];return e.forEach(function(t){var o=t.clasificador,e=t.Lista_SemanaAnios,s=t.Total_Costo,h=t.Lista_subclasificadores,l=crear_identificador(f,o);r(e,"Total_Costo")&&(u.push(React.createElement("tr",{className:f,style:{display:"none"}},n.map(function(n){var t=e.findIndex(function(t){return t.Semana==n}),r=t>-1?e[t].Total_Costo:0;return React.createElement(i,{dato:r,estilo:{forntSize:"14px",color:"azure",background:"#729fcf",textAlign:"right"}})}),React.createElement(i,{dato:s,estilo:{forntSize:"14px",color:"azure",background:"#729fcf",textAlign:"right"}}))),u.push(React.createElement(c,{subClasificadores:h,nombre:l})))}),u},c=function(t){var e=t.subClasificadores,f=t.nombre,u=[];return e.forEach(function(t){var o=t.subclacificador,e=t.Lista_SemanaAnios,s=t.Total_Costo,h=t.Lista_movimientos,c=crear_identificador(f,o);r(e,"Total_Costo")&&(u.push(React.createElement("tr",{className:f,style:{display:"none"}},n.map(function(n){var t=e.findIndex(function(t){return t.Semana==n}),r=t>-1?e[t].Total_Costo:0;return React.createElement(i,{dato:r,estilo:{forntSize:"14px",background:"#b4c7dc",textAlign:"right"}})}),React.createElement(i,{dato:s,estilo:{forntSize:"14px",background:"#b4c7dc",textAlign:"right"}}))),u.push(React.createElement(l,{movimientos:h,nombre:c})))}),u},l=function(t){var u=t.movimientos,v=t.nombre,s=[],f=[],y=function(n){var r=0,i=!0,f=!1,e=undefined,t,o,s;try{for(t=u.filter(function(t){return t.Tipo_movimiento==n})[Symbol.iterator]();!(i=(o=t.next()).done);i=!0)s=o.value,r+=s.Costo}catch(h){f=!0;e=h}finally{try{!i&&t["return"]&&t["return"]()}finally{if(f)throw e;}}return r},o=!0,h=!1,c=undefined,l,e,a;try{for(l=function(){var n=a.value;f.findIndex(function(t){return t.Tipo_movimiento==n.Tipo_movimiento})==-1?f.push(n):""},e=u[Symbol.iterator]();!(o=(a=e.next()).done);o=!0)l()}catch(p){h=!0;c=p}finally{try{!o&&e["return"]&&e["return"]()}finally{if(h)throw c;}}return r(f,"Costo")?f.forEach(function(t){var r=t.Tipo_movimiento;s.push(React.createElement("tr",{className:v,style:{display:"none"}},n.map(function(n){var t=u.findIndex(function(t){return t.Semana==n&&t.Tipo_movimiento==r}),f=t>-1?u[t].Costo:0;return React.createElement(i,{dato:f,estilo:{forntSize:"14px",color:"#000000",textAlign:"right"}})}),React.createElement(i,{dato:y(r),estilo:{forntSize:"14px",color:"#000000",textAlign:"right"}})))}):"",s},a=function(){var n=0;return React.createElement("tr",null,u.map(function(t){return n+=t.Total_Costo,React.createElement("th",{style:{background:"#ff6600",color:"azure",textAlign:"right"}},moneyFormat(redondeo(t.Total_Costo)))}),React.createElement("th",{style:{background:"#ff6600",color:"azure",textAlign:"right"}},moneyFormat(redondeo(n))))};return React.createElement("tbody",null,React.createElement(o,null),React.createElement(a,null))};return React.createElement("table",{className:"table table-condensed"},React.createElement(o,null),React.createElement(s,null))};return React.createElement("div",{id:"modal_movimientos_por_establecimiento",style:{display:"none",position:"fixed",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(144, 144, 146, 0.29)",top:0,bottom:0,left:0,right:0,zIndex:999}},React.createElement("div",{className:"panel panel-default animate",style:{height:"95%",width:"90%"}},React.createElement("div",{className:"panel-heading",style:{background:"#006699",color:"#FFFFFF"}},React.createElement("i",{className:"btn btn-danger fa fa-close",style:{float:"right"},onClick:function(){return document.getElementById("modal_movimientos_por_establecimiento").style.display="none"}}),React.createElement("h4",null," ",React.createElement("i",{className:"fa fa-calendar"})," MOVIMIENTOS A DETALLE ",t.establecimiento||"",".")),React.createElement("div",{className:"panel-body",style:{height:"90%"}},React.createElement("strong",{style:{color:"#666666",display:"block",fontSize:"20px"}},"MOVIMIENTOS OPERACIONAL POR SEMANA DEL AÑO."),React.createElement("div",{style:{height:"90%",border:"solid 1px #444",overflow:"auto",marginTop:"30px"}},React.createElement("div",{style:{width:"46%",float:"left",marginTop:"1px",marginLeft:"0"}},React.createElement(o,null)),React.createElement("div",{style:{width:"14%",float:"left",marginTop:"1px"}},React.createElement(s,null))))))},BotonTogle=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={clase:"glyphicon glyphicon-plus"};this.change=this.cambio.bind(this)}return _inherits(t,n),_createClass(t,[{key:"cambio",value:function(){var t=this.state.clase,n=this.props,i=n.identificador,r=n.poicion,u=t=="glyphicon glyphicon-minus"?"glyphicon glyphicon-plus":"glyphicon glyphicon-minus";this.setState({clase:u});ocultarMostrar(i,r)}},{key:"render",value:function(){var n=this.state.clase;return React.createElement("i",{className:n,onClick:this.change})}}]),t}(React.Component),ocultarMostrar=function(n){var t=n.split(" "),i=function(){var n=document.querySelectorAll("."+t[0]+"_1");return n.forEach(function(n){n.style.display="none"}),"none"},r=document.querySelectorAll("."+t[t.length-1]);r.forEach(function(n){var t=n.style.display;n.style.display=t?"":i()})},remplazar_espacios_por_guion_bajo=function(n){var u="",i=!0,f=!1,e=undefined,t,o,r;try{for(t=n[Symbol.iterator]();!(i=(o=t.next()).done);i=!0)r=o.value,u+=r!=" "?r:"_"}catch(s){f=!0;e=s}finally{try{!i&&t["return"]&&t["return"]()}finally{if(f)throw e;}}return u},crear_identificador=function(n,t){var i=remplazar_espacios_por_guion_bajo(n),r=remplazar_espacios_por_guion_bajo(t);return n+"_1 "+i+"_"+r};location.protocol!="http:"?location.protocol="http:":ReactDOM.render(React.createElement(EstadoDeResultados,null),document.getElementById("root"));