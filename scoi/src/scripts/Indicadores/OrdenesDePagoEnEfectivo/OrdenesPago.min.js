"use strict";var obtener_concepto_compra_gasto=function(n){var t=[];return n.forEach(function(i){t.findIndex(function(n){return n.concepto_compra_gasto===i.concepto_compra_gasto})===-1&&t.push({concepto_compra_gasto:i.concepto_compra_gasto,establecimientos:n.filter(function(n){return n.concepto_compra_gasto===i.concepto_compra_gasto}),total:obtener_suma_total_lista(n.filter(function(n){return n.concepto_compra_gasto===i.concepto_compra_gasto}))})}),t},obtener_establecimientos=function(n){var t=[];return n.forEach(function(i){t.findIndex(function(n){return n.cod_estab===i.cod_estab})===-1&&t.push({cod_estab:i.cod_estab,establecimimiento:i.establecimimiento,conceptos:n.filter(function(n){return n.cod_estab===i.cod_estab}),total:obtener_suma_total_lista(n.filter(function(n){return n.cod_estab===i.cod_estab}))})}),t},obtener_conceptos=function(n){var t=[];return n.forEach(function(i){t.findIndex(function(n){return n.concepto_orden_de_pago===i.concepto_orden_de_pago})===-1&&t.push({concepto_orden_de_pago:i.concepto_orden_de_pago,detalles:n.filter(function(n){return n.concepto_orden_de_pago===i.concepto_orden_de_pago}),total:obtener_suma_total_lista(n.filter(function(n){return n.concepto_orden_de_pago===i.concepto_orden_de_pago}))})}),t},obtener_suma_total_lista=function(n){return moneyFormat(n.map(function(n){return n.cantidad}).reduce(function(n,t){return n+t}))},moneyFormat=function(n){var i=function(n){return n>9||n.search(0)>-1?n:n+"0"},r=function(n){return new Intl.NumberFormat("es-MX").format(n)},t=function(){return Math.round(n*100)/100}().toString(),u=t.split(".").length>1?i(t.split(".")[1]):"00",f=t.split(".").length>0?r(t.split(".")[0]):"0";return"$"+(f||0)+"."+(u||0)},obtener_semanas_ocupadas_por_anio=function(n){var i=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],t;return n.sort(function(n,t){return n.anio_pago>t.anio_pago?1:-1}),t=[],n.forEach(function(r){if(t.findIndex(function(n){return n.anio===r.anio_pago})===-1){var u=semanas_obtenidas(n.filter(function(n){return n.anio_pago===r.anio_pago}));u.sort(function(n,t){return i.findIndex(function(t){return t==n.mes_pago})>i.findIndex(function(n){return n==t.mes_pago})?1:-1});t.push({anio:r.anio_pago,meses:obtener_semanas_por_mes(u),cantidad_semanas:u.length})}}),t},obtener_semanas_por_mes=function(n){var t=[];return n.forEach(function(i){if(t.findIndex(function(n){return n.mes===i.mes_pago})===-1){var r=semanas_obtenidas(n.filter(function(n){return n.mes_pago===i.mes_pago}));r.sort(function(n,t){return n.semana_del_anio_pago>t.semana_del_anio_pago?1:-1});t.push({mes:i.mes_pago,semanas:r.map(function(n){return n.semana_del_anio_pago}),cantidad_semanas:r.length})}}),t},semanas_obtenidas=function(n){var t=[];return n.forEach(function(n){t.findIndex(function(t){return t.semana_del_anio_pago===n.semana_del_anio_pago&&t.mes_pago===n.mes_pago})===-1&&t.push(n)}),t},total_de_semanas_anio=function(n){var t=[],i=[];return n.forEach(function(n){t=t.concat(n.meses.map(function(n){return n.semanas.map(function(t){return{semana:t,mes:n.mes}})}))||t}),t.forEach(function(n){i=i.concat(n)}),i},mostrar_detalles_concepto=function(n,t){console.log("detalles=>",t);vista_pagos_por_semana.vista_pagos_por_semana(n,t)},CeldaTotal=function(n){var t=n.total;return React.createElement("td",{style:{textAlign:"right"}}," ",React.createElement("label",null,t))},CaveceraTabla=function(n){var f=n.anios,t=[],i=[],r=[],u=!0,e=function(){return u=!u,u?"22, 131, 186":"0, 119, 179"};return t.push(React.createElement("tr",{className:"cavecera_tabla"},React.createElement("th",{rowSpan:"3",className:"cavecera titulo",id:"titulo"}," ",React.createElement("label",null,"CONCEPTOS")),f.map(function(n){return i=i.concat(n.meses.map(function(n){return n}))||i,React.createElement("th",{colSpan:n.cantidad_semanas},n.anio)}),React.createElement("th",{rowSpan:"3"},React.createElement("label",null,"TOTAL")))),t.push(React.createElement("tr",{className:"cavecera_tabla"},i.map(function(n){var t=e();return r=r.concat(n.semanas.map(function(n){return{semana:n,mes:t}})),React.createElement("th",{style:{top:"35px",background:"rgb("+t+")"},colSpan:n.cantidad_semanas},n.mes)}))),t.push(React.createElement("tr",{className:"cavecera_tabla"},r.map(function(n){return React.createElement("th",{style:{top:"68px",background:n.mes}},n.semana)}))),t},SemanasResultadosConceptos=function(n){var t=n.Lista,i=n.anios,r=total_de_semanas_anio(i);return r.map(function(n){var u=t.filter(function(t){return t.semana_del_anio_pago==n.semana&&t.mes_pago==n.mes}),i=u.map(function(n){return n.cantidad})||[],r=i.length>0?i.reduce(function(n,t){return t+n}):0;return React.createElement("td",{style:{textAlign:"right"}},r!=0?moneyFormat(r):" ")})},TablaMonitor=function(n){var i=n.datos,r,t;return i.sort(function(n,t){return n.establecimimiento>t.establecimimiento?1:-1}),r=obtener_concepto_compra_gasto(i||[]),t=obtener_semanas_ocupadas_por_anio(i),React.createElement("div",{style:{height:"700px",overflow:"auto"}},React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement(CaveceraTabla,{anios:t})),React.createElement("tbody",null,r.map(function(n){var i="tb_"+remplazar_espacios_por_guion_bajo(n.concepto_compra_gasto);return[React.createElement("tr",{name:"conceptos"},React.createElement("td",{className:"cavecera clasificador"},React.createElement(BotonTogle,{identificador:i}),React.createElement("strong",null," ",n.concepto_compra_gasto)),React.createElement(SemanasResultadosConceptos,{Lista:n.establecimientos,anios:t}),React.createElement(CeldaTotal,{total:n.total})),React.createElement(VistaEstablecimiento,{lista:n.establecimientos,anios:t,nombre:i})]}))))},VistaEstablecimiento=function(n){var r=n.lista,t=n.anios,i=n.nombre,u=obtener_establecimientos(r||[]);return u.map(function(n){var r=crear_identificador(i,n.establecimimiento);return[React.createElement("tr",{name:"estalbelcimientos",style:{display:"none"},className:i},React.createElement("td",{className:"cavecera establecimimiento"},React.createElement(BotonTogle,{identificador:r}),React.createElement("strong",null,n.establecimimiento)),React.createElement(SemanasResultadosConceptos,{Lista:n.conceptos,anios:t}),React.createElement(CeldaTotal,{total:n.total})),React.createElement(VistaConceptos,{lista:n.conceptos,anios:t,nombre:r})]})},VistaConceptos=function(n){var t=n.lista,i=n.anios,r=n.nombre,u=obtener_conceptos(t);return u.map(function(n){return React.createElement("tr",{name:"ordenes",style:{display:"none"},className:r},React.createElement("td",{className:"cavecera concepto_orden_de_pago"},React.createElement("label",null,n.concepto_orden_de_pago," "),React.createElement("i",{className:"btn btn-default fa fa-info",style:{float:"right"},onClick:function(){return mostrar_detalles_concepto(n.concepto_orden_de_pago,n.detalles)}})),React.createElement(SemanasResultadosConceptos,{Lista:n.detalles,anios:i}),React.createElement(CeldaTotal,{total:n.total}))})},MostrarProveedores=function(n){var t=n.lista;return t.length>0?React.createElement("div",{className:"panel panel-info",style:{height:"750px"}},React.createElement("p",null,"Cantidad De Registros = ",React.createElement("strong",null,t.length||0)),React.createElement(TablaMonitor,{datos:t})):React.createElement("div",null,React.createElement("h3",null,"Sin Registros a Mostrar!!!"))},llenar_tabla_pagos=function(n){ReactDOM.render(React.createElement(MostrarProveedores,{lista:n}),document.querySelector("#resultados_tabla"))};